<div class="page-width">
  {% if section.settings.title != blank %}
    <div class="section-header text-center">
      <h1 style="font-weight:600;">{{ section.settings.title | escape }}</h1>
      <p  style="padding-bottom:39px;"> {{ section.settings.sub_title | escape }} </p>
    </div>
  {% endif %}

  {% case section.settings.grid %}
    {% when 2 %}
      {%- assign grid_item_width = 'medium-up--one-half' -%}
    {% when 3 %}
      {%- assign grid_item_width = 'small--one-half medium-up--one-third' -%}
    {% when 4 %}
      {%- assign grid_item_width = 'small--one-half medium-up--one-quarter' -%}
    {% when 5 %}
      {%- assign grid_item_width = 'small--one-half medium-up--one-fifth' -%}
  	{% when 6 %}
      {%- assign grid_item_width = 'small--one-half medium-up--one-sixth' -%}
  {% endcase %}

  <div style="overflow: hidden;">
    <ul id="grid-ul-beautify-box-{{section.id}}"  class="grid grid--uniform" style="{%- if section.settings.show_page_Dot -%} flex-wrap: nowrap; {%- endif -%}">
      {% for block in section.blocks limit: section.blocks.size %}
        <li class="grid__item__beautify-{{ grid_item_width }}" {{ block.shopify_attributes }}>
          {%- liquid 
             assign   collection_title = block.settings.title
             assign   collection = collections[block.settings.collection] 
		     assign   collection_img = block.settings.image   		
          -%}
          
          {% include 'collection-grid-item-beautify', collection: collection , collection_title:collection_title,collection_img:collection_img %}
        </li>
      {% endfor %}
    </ul>
 
    
  </div>
	
  {% if section.blocks.size == 0 %}
    {% include 'no-blocks' %}
  {% endif %}
  
    {% if section.settings.show_view_all or section.settings.show_page_Dot %}
  <div class="center{% if section.settings.swipe_on_mobile %} small-hide medium-hide{% endif %}">
    
    {% if section.settings.show_page_Dot %}
   		<ol id="collection_list_pog-{{section.id}}">

    	</ol>
    {% else %}
      <a href="{{ routes.collections_url }}" class="button">{{ 'sections.collection_list.view_all' | t }}</a>
    {% endif %}
    
    </div>
  
    {% endif %}
</div>





<script>


  var collection_list_func = function(){
//获取轮播点
    var contentbox = document.getElementById('grid-ul-beautify-box-{{section.id}}');
                                             
    var list_text = document.getElementById('collection_list_pog-{{section.id}}');

	console.log('this-',contentbox,'<===>',list_text);
	var itemLength = document.getElementsByClassName('grid__item__beautify small--one-half medium-up--one-quarter').length;
    for (let a = 0; a < itemLength; a++) {
//       itemlist[a].index = a
      list_text.innerHTML += '<li></li>'
    }

    var list = list_text.getElementsByTagName('li')
    list[0].index = 0
    list[0].className = 'active'

    for (var c = 0; c < list.length; c++) {
      list[c].index = c
      list[c].onclick = function () {
        for (var j = 0; j < list.length; j++) {
          list[j].className = ''
        }
        this.className = 'active'
        contentbox.style.transform =
          'translate(' + -itemlist[this.index].index * diff + 'px' + ')'
      }
    }

  }();
  
  
  
// class text extends VariantSelects {
//   constructor() {
//     super();
//   }


// }

// customElements.define('text1', text);
  

</script>

<style>

  ol#collection_list_pog{
    width: 100%;
    display: flex;
    justify-content: center;
/*     position: absolute; */
    bottom: 10%;
    z-index: 100;
    cursor: pointer;
    padding: 0px;
    margin: 0;
  }
  
  
  ol#collection_list_pog li{
    float:left;
    background:green;
    width:11px;
    height:11px;
    text-align: center;
    line-height: 11px;
    font-size: 10px;
    border-radius: 50%;
    text-align: center;
    transition:all 1.5s;
    margin: 0 5px;
    list-style-type: none;
  }
  
    ol#collection_list_pog li.active{
      background:blue;
      color:#fff;
    }

</style>


{% schema %}
{
  "name": {

    "en": "Collection list Beautify"
  },
  "tag": "section",
  "class": "index-section",
  "max_blocks": 8,
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": {
   
        "en": "Heading"
      },
      "default": {

        "en": "NEW RELEASES"
      }
    },
 	{
      "type": "text",
      "id": "sub_title",
      "label": {
   
        "en": "Sub text"
      },
      "default": {

        "en": "New supply this week"
      }
    },
    {
      "type": "range",
      "id": "grid",
      "label": {
 
        "en": "Collections per row"
      },
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 3
    },

	{
      "type": "checkbox",
      "id": "show_view_all",
      "default": false,
      "label": "t:sections.collection-list.settings.show_view_all.label"
    },
	{
      "type": "checkbox",
      "id": "show_page_Dot",
      "default": false,
      "label": "Show Page Dot"
    }

  ],
  "blocks": [
    {
      "type": "featured_collection",
      "name": {

        "en": "Collection"
      },
      "settings": [
        {
          "label": {

            "en": "Collection"
          },
          "id": "collection",
          "type": "collection"
        },
		{
           "type": "image_picker",
           "id": "image",
           "label": "Image"
      	 },
		{
          "type": "text",
          "id": "title",
          "label": {

            "en": "Sub text"
          },
          "default": {

            "en": "New supply this week"
          },
		 "info":"Leave empty to use 'collection title'title. Enter key 'hide_title' to hide title"
    	}
      ]
    }
  ],
  "presets": [
    {
      "name": {

        "en": "collection-list-Beautify"
      },
      "category": {

        "en": "Collection"
      },
      "blocks": [
        {
          "type": "featured_collection"
        },
        {
          "type": "featured_collection"
        },
        {
          "type": "featured_collection"
        }
      ]
    }
  ]
}
{% endschema %}
